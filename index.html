<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form with Multiple Sets of 3 Elements</title>
    <script>
        // Function to dynamically add sets of 3 fields for field 7 (array of names, raashi, nakshatra)
        let setCount = 1;

        function addSet() {
            setCount++;
            const setContainer = document.getElementById('field7Sets');
            const newSet = document.createElement('div');
            newSet.className = 'set';
            newSet.innerHTML = `
                <input type="text" id="field7a${setCount}" name="field7a${setCount}"><br><br>

                <input type="text" id="field7b${setCount}" name="field7b${setCount}"><br><br>

                <input type="text" id="field7c${setCount}" name="field7c${setCount}"><br><br>
            `;
            setContainer.appendChild(newSet);
        }

        // Function to collect the form data, convert to JSON, and send to GAS
        function submitForm() {
            let formData = {
                name: document.getElementById('name').value,
                mobile: document.getElementById('mobile').value,
                email: document.getElementById('email').value,
                seva_date: document.getElementById('seva_date').value,
                address: document.getElementById('address').value,
                payee_name: document.getElementById('payee_name').value,
                field7: ""  // Will store the concatenated string for multiple sets of 3 items
            };

            // Collect the multiple sets of 3 items for field 7 and format as described
            let sets = [];
            for (let i = 1; i <= setCount; i++) {
                let set = [
                    document.getElementById(`field7a${i}`).value,
                    document.getElementById(`field7b${i}`).value,
                    document.getElementById(`field7c${i}`).value
                ];
                // Join the 3 items with a hyphen, and then join all sets with a comma
                sets.push(set.join('-'));
            }
            formData.field7 = sets.join(',');

            // Convert the form data object to JSON
            let jsonData = JSON.stringify(formData);

            // Define the GAS endpoint URL
            let gasEndpoint = 'https://script.google.com/macros/s/AKfycbw4aEFStrHiNgamBBtOIsBda25QEVZkOnH13Zm_ouslFZ9qTesd9eOlRwAAITXTMhRDMg/exec';  // Replace with your GAS URL

            // Send the POST request to GAS
            fetch(gasEndpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: jsonData
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Form submitted successfully!');
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error submitting form');
            });
        }
    </script>
</head>
<body>
    <h1>ದುರ್ಗಾಪರಮೇಶ್ವರಿ ಸೇವಾಟ್ರಸ್ಟ್, ವಿಶ್ವನಾಥಪುರ - ದೈನಂದಿನ ಪೂಜಾ ಸೇವೆ</h1>
    <form id="myForm" onsubmit="event.preventDefault(); submitForm();">
        <label for="name">ಹೆಸರು:</label><br>
        <input type="text" id="name" name="name"><br><br>

        <label for="mobile">ಮೊಬೈಲ್:</label><br>
        <input type="number" id="mobile" name="mobile"><br><br>

        <label for="email">ಇಮೇಲ್ ವಿಳಾಸ:</label><br>
        <input type="text" id="email" name="email"><br><br>

        <label for="seva_date">ಸೇವಾ ದಿನಾಂಕ:</label><br>
        <input type="date" id="seva_date" name="seva_date"><br><br>

        <label for="address">ಸೇವಾ ವಿಳಾಸ:</label><br>
        <input type="text" id="address" name="address"><br><br>

        <label for="payee_name">ಪಾವತಿ ಮಾಡಿರುವುದು:</label><br>
        <input type="text" id="payee_name" name="payee_name"><br><br>

        <label>ಹೆಸರು, ರಾಶಿ, ನಕ್ಷತ್ರ :</label><br>
        <div id="field7Sets">
           
            <div class="set">
                <input type="text" id="field7a1" name="field7a1" placeholder="ಹೆಸರು"><br><br>

                <input type="text" id="field7b1" name="field7b1"><br><br>

                <input type="text" id="field7c1" name="field7c1"><br><br>
            </div>
        </div>
        <button type="button" onclick="addSet()">Add Another Set</button><br><br>

        <input type="submit" value="Submit">
    </form>
</body>
</html>
